"use strict";var e,t=this&&this.t||function(e,t,s,i){var r,n=arguments.length,a=3>n?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,s,i);else for(var u=e.length-1;u>=0;u--)(r=e[u])&&(a=(3>n?r(a):n>3?r(t,s,a):r(t,s))||a);return n>3&&a&&Object.defineProperty(t,s,a),a},s=this&&this.i||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"u",{value:!0}),exports.WithdrawalController=void 0;const i=require("@nestjs/common"),r=require("@nestjs/swagger"),n=require("./withdrawal-job-manager.service");let a=e=class{constructor(t){this.jobManagerService=t,this.logger=new i.Logger(e.name)}async getQueueStats(){return await this.jobManagerService.getQueueStats()}async debugQueue(){return await this.jobManagerService.debugQueue()}async triggerJobPicking(){return this.logger.log("Manually triggering job picking..."),await this.jobManagerService.triggerPickJobs(1),{success:!0,message:"Job picking triggered",stats:await this.jobManagerService.getQueueStats()}}async startProcessing(){try{return this.logger.log("Manually starting job processing..."),await this.jobManagerService.startProcessing(),{success:!0,message:"Job processing started",stats:await this.jobManagerService.getQueueStats()}}catch(e){throw this.logger.error("Error starting job processing: "+e.message,e.stack),e}}};exports.WithdrawalController=a,t([(0,i.Get)("queue/stats"),(0,r.ApiOperation)({summary:"Get withdrawal queue statistics"}),(0,r.ApiResponse)({status:200,description:"Queue statistics"}),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",Promise)],a.prototype,"getQueueStats",null),t([(0,i.Get)("queue/debug"),(0,r.ApiOperation)({summary:"Get detailed queue debug information"}),(0,r.ApiResponse)({status:200,description:"Detailed queue debug info"}),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",Promise)],a.prototype,"debugQueue",null),t([(0,i.Post)("queue/trigger"),(0,r.ApiOperation)({summary:"Manually trigger job picking"}),(0,r.ApiResponse)({status:200,description:"Job picking triggered"}),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",Promise)],a.prototype,"triggerJobPicking",null),t([(0,i.Post)("queue/start"),(0,r.ApiOperation)({summary:"Manually start job processing"}),(0,r.ApiResponse)({status:200,description:"Job processing started"}),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",Promise)],a.prototype,"startProcessing",null),exports.WithdrawalController=a=e=t([(0,r.ApiTags)("withdrawal"),(0,i.Controller)("api/withdrawal"),s("design:paramtypes",[n.WithdrawalJobManagerService])],a);