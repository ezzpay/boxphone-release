"use strict";Object.defineProperty(exports,"t",{value:!0}),exports.analyzeBill=exports.ocrBillPro=exports.ocrBillFree=void 0;const e=require("../../common/constants/config"),s=require("ocr-space-api-wrapper"),n=require("@nestjs/common"),r=new n.Logger("OCRService"),t=async n=>{try{const r=await(0,s.ocrSpace)(n,{apiKey:e.config.spaceocr.keyFree,language:"eng",scale:!0,OCREngine:"2",isTable:!0});return{parsedText:r.ParsedResults[0].ParsedText,processingTimeInMilliseconds:r.ProcessingTimeInMilliseconds}}catch(e){throw console.error("Error processing OCR: "+e.message),e}};exports.ocrBillFree=t;const c=async n=>{try{const r=1===Math.floor(2*Math.random())+1?e.config.spaceocr.datacenterPrimary:e.config.spaceocr.datacenterSecond,t=await(0,s.ocrSpace)(n,{apiKey:e.config.spaceocr.key,language:"eng",scale:!0,OCREngine:"2",isTable:!0,ocrUrl:r});return{parsedText:t.ParsedResults[0].ParsedText,processingTimeInMilliseconds:t.ProcessingTimeInMilliseconds}}catch(e){return r.error("Error processing OCR: "+e.message),null}};exports.ocrBillPro=c;const o=["chuyển tiền thành công","funds transfer successful"],a=e=>{const s=e.toLowerCase();return o.some(e=>s.includes(e))?{analyzedStatus:"success"}:{analyzedStatus:"unknown"}};exports.analyzeBill=a;