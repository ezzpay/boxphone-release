"use strict";var t=this&&this.t||function(t,e,i,s){var c,o=arguments.length,n=3>o?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,s);else for(var r=t.length-1;r>=0;r--)(c=t[r])&&(n=(3>o?c(n):o>3?c(e,i,n):c(e,i))||n);return o>3&&n&&Object.defineProperty(e,i,n),n},e=this&&this.i||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=this&&this.o||function(t,e){return function(i,s){e(i,s,t)}};Object.defineProperty(exports,"l",{value:!0}),exports.AcbService=void 0;const s=require("@nestjs/common"),c=require("../../common/modules/websocket/constants/websocket"),o=require("../device/device.service"),n=require("./base/base-bank.service"),r=require("../../common/utils/time"),a=require("../../common/constants/keyboard"),l=require("./constants/acbank");let u=class extends n.BaseBankService{constructor(t,e){super(t,e),this.wsService=t,this.BANK_CODE="ACB",this.BUNDLE_ID="mobileapp.acb.com.vn"}async captureScreen(t,e){}async clickPasswordField(t){try{const{x:e,y:i}=l.ACB_UI_COORDINATES.PASSWORD_FIELD;this.logger.log(`Clicking password field on device ${t} at coordinates (${e}, ${i})`),await this.clickWithTransition(t,e,i,.2),await(0,r.sleep)(1e3),this.logger.log("Password field clicked successfully on device "+t)}catch(e){throw this.logger.error(`Error clicking password field on device ${t}: ${e.message}`),e}}async inputPasswordFromConfig(t){try{const e=await this.deviceService.getDeviceConfig(t);if(!e||!e.password)throw Error("Password not configured for device "+t);await this.wsService.inputText(t,e.password)}catch(e){throw this.logger.error(`Error inputting password from config for device ${t}: ${e.message}`),e}}async clickLoginButton(t){try{const{x:e,y:i}=l.ACB_UI_COORDINATES.LOGIN_BUTTON;this.logger.log(`Clicking login button on device ${t} at coordinates (${e}, ${i})`),await this.wsService.click(t,e,i,.2),await(0,r.sleep)(5e3),this.logger.log("Login button clicked successfully on device "+t)}catch(e){throw this.logger.error(`Error clicking login button on device ${t}: ${e.message}`),e}}async login(t){try{await this.killApp(t),await this.launchApp(t);const{x:e,y:i}=l.ACB_UI_COORDINATES.LOGIN_BUTTON;this.logger.log(`Clicking login button on device ${t} at coordinates (${e}, ${i})`),await this.wsService.click(t,e,i,.2),await(0,r.sleep)(2e3),await this.inputPasswordFromConfig(t),await(0,r.sleep)(2e3);const{x:s,y:c}=a.COMMON_COORDINATES.RETURN_KEY;this.logger.log(`Clicking return key on device ${t} at coordinates (${s}, ${c})`),await this.wsService.click(t,s,c,.2),await(0,r.sleep)(2e3),await this.wsService.click(t,.5,.62,.2),await(0,r.sleep)(5e3),await this.wsService.click(t,.3,.55,.2),await this.wsService.click(t,.5,.65,.2)}catch(e){throw this.logger.error(`Error logging in on device ${t}: ${e.message}`),e}}async executeTransfer(t,e){}async executeInternalTransfer(t,e){return this.executeExternalTransfer(t,e)}async executeExternalTransfer(t,e){console.warn("ACB executeExternalTransfer")}};exports.AcbService=u,exports.AcbService=u=t([(0,s.Injectable)(),i(0,(0,s.Inject)(c.WEBSOCKET_SERVICE)),e("design:paramtypes",[Object,o.DeviceService])],u);