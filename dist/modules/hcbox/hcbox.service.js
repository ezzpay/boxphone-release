"use strict";var t,e=this&&this.t||function(t,e,n,r){var i,s=arguments.length,c=3>s?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(c=(3>s?i(c):s>3?i(e,n,c):i(e,n))||c);return s>3&&c&&Object.defineProperty(e,n,c),c},n=this&&this.i||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},r=this&&this.o||function(t,e){return function(n,r){e(n,r,t)}};Object.defineProperty(exports,"u",{value:!0}),exports.HcBoxService=void 0;const i=require("@nestjs/common"),s=require("../../common/modules/websocket/constants/websocket"),c=require("../../common/utils/time");let o=t=class{constructor(e){this.wsService=e,this.logger=new i.Logger(t.name)}async listDevices(){try{return await this.wsService.listDevices()}catch(t){throw this.logger.error("Error listing devices: "+t.message),t}}async executeTransfer(t,e){try{this.logger.log(`Executing transfer for withdrawal ${t.withdrawalId} on device ${e}`);const n=this.getBankBundleId(t.bankCode);return n&&(await this.wsService.launchApp(e,n),await(0,c.sleep)(3e3)),await this.wsService.click(e,.5,.3,.2),await(0,c.sleep)(2e3),this.logger.warn("Transfer execution flow needs to be customized per bank app UI"),this.logger.log("Transfer execution completed for withdrawal "+t.withdrawalId),!0}catch(e){throw this.logger.error(`Error executing transfer for withdrawal ${t.withdrawalId}: ${e.message}`),e}}getBankBundleId(t){return{VIETCOMBANK:"com.vietcombank.mobilebanking",TPBANK:"com.tpbank.mobilebanking",TECHCOMBANK:"com.techcombank.mobilebanking"}[t]||null}async click(t,e,n,r=.2){return this.wsService.click(t,e,n,r)}async swipe(t,e){return this.wsService.swipe(t,e)}async screen(t,e){return this.wsService.captureScreen(t,e)}async home(t){return this.wsService.home(t)}async inputNumpadNumber(t,e){return this.wsService.inputNumpadNumber(t,e)}inputText(t,e){return this.wsService.inputText(t,e)}};exports.HcBoxService=o,exports.HcBoxService=o=t=e([(0,i.Injectable)(),r(0,(0,i.Inject)(s.WEBSOCKET_SERVICE)),n("design:paramtypes",[Object])],o);